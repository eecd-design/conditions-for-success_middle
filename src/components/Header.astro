---

import IconSearch from "./icons/IconSearch_24.astro";
import IconLight from "./icons/IconLight_24.astro";
import IconDark from "./icons/IconDark_24.astro";
import SearchDialog from "./SearchDialog.astro";

const { url } = Astro;
let path = url.pathname;

---

<header>

	<nav class="global">
		<ul class="menu">
            <li class="home"><a href="/" data-font-type="serif">NB Middle School Conditions for Success</a></li>
            <li><a class={path.includes('/big-seven') ? 'active' : ''} href="/big-seven">The Big Seven</a></li>
            <li><a class={path.includes('/resources') ? 'active' : ''} href="/resources">Resources</a></li>
        </ul>
	</nav>

	<div class="global-controls">
		<button 
			class="open-dialog"
			data-dialog="search-dialog"
			type="button"
			aria-label="Open Search Dialog"
		>
			<div class="icon-and-label-container">
				<IconSearch />
				<span class="label-container">
					<span class="label">Search</span>
				</span>
			</div>
		</button>
        <button class="theme-toggle" type="button" aria-label="Toggle Theme">
			<div class="icon-and-label-container">
				<IconLight />
				<IconDark hidden={true}/>
				<span class="label-container" hidden>
					<span class="label">Change Theme</span>
				</span>
			</div>
        </button>
	</div>

</header>

<SearchDialog />

<style is:global>

	header {
		display: flex;
		flex-flow: row nowrap;
		align-items: center;
		gap: 0.5rem;
		height: 7rem;
		padding: 0 3rem;
		background: 
			url('/patterns/pattern.svg') repeat,
			var(--colour-fill-neutral-bold-muted);
		background-blend-mode: screen;
	}

	header nav.global {
		flex-grow: 1;
	}

	header nav.global .menu {
		display: flex;
		flex-flow: row nowrap;
		align-items: center;
		gap: 0.5rem;
		margin: 0;
		padding: 0;
		list-style-type: none;
	}

	header nav.global .home {
		flex-grow: 1;
		text-decoration: none;
		color: var(--colour-ui-reverse);
	}

	header nav.global .home a {
		text-decoration: none;
		color: var(--colour-ui-reverse);
	}

	header nav.global .menu :not(.home) a,
	header .global-controls button {
		display: flex;
		align-items: center;
		height: 3rem;
		padding: 0 1rem;
		border-radius: var(--border-radius-normal);
		text-decoration: none;
		font-size: 1.125rem;
		color: var(--colour-ui-reverse);
	}

	header nav.global .menu :not(.home) a:is(:hover, :focus-visible),
	header .global-controls button:is(:hover, :focus-visible) {
		background-color: var(--colour-fill-neutral-subtle-muted);
		color: var(--colour-ui-neutral);
	}
	
	header nav.global .menu :not(.home) a.active {
		outline: 2px solid var(--colour-border-neutral-subtle-muted);
		outline-offset: -1px;
		pointer-events: none;
	}

	header .global-controls {
		--button-background-colour: transparent;
		--icon-colour: var(--colour-ui-reverse);
		--icon-size: 1.5rem;
		--label-colour: var(--colour-ui-reverse);
		--label-size: 1.125rem;
		display: flex;
		flex-flow: row nowrap;
		align-items: center;
		gap: 0.5rem;
	}

	header .global-controls button:is(:hover, :focus-visible) {
		--icon-colour: var(--colour-ui-neutral);
		--label-colour: var(--colour-ui-neutral);
	}

	header .global-controls .theme-toggle {
		padding: 0 0.75rem;
	}


</style>