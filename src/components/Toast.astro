---
const { id, message, colour, type } = Astro.props;
---

<div
	id={id}
	class="toast-container"
	role="status"
	aria-live={type === "success" ? "polite" : "assertive"}
>
	<div
		class="toast"
		data-theme={colour}
		data-vibrancy="vivid"
		data-type={type}
	>
		<slot name="icon" />
		<span>{message}</span>
	</div>
</div>

<style>
	.toast-container {
		display: flex;
		flex-flow: column;
		align-items: center;
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		z-index: 1001;
		padding: 0 var(--space-sm) var(--space-sm);
		opacity: 0;
		transition:
			opacity var(--transition-linear-fast),
			bottom var(--transition-ease-fast);
	}

	.toast-container[open] {
		opacity: 1;
		bottom: 1rem;
		transition:
			opacity var(--transition-linear-medium),
			bottom var(--transition-ease-slow);
	}

	.toast {
		--icon-size: 0.75rem;
		--icon-colour: var(--colour-ui-accent, var(--colour-ui-neutral));
		display: flex;
		flex-flow: row nowrap;
		align-items: center;
		gap: var(--space-xs);
		padding: 0 var(--space-sm);
		height: 3rem;
		background-color: var(
			--colour-fill-accent-subtle,
			var(--colour-fill-neutral-subtle)
		);
		border-radius: var(--border-radius-normal);
		font-size: var(--font-size-2xs);
		box-shadow: var(--box-shadow);
	}

	.toast[data-type="failure"] {
		--icon-size: 1rem;
	}
</style>
